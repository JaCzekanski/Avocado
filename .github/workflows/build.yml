name: build

on: [push]

jobs:
  linux_clang6:
    name: "Linux Clang6"
    runs-on: ubuntu-18.04
    steps:
    - uses: actions/checkout@v2
      with:
        submodules: 'recursive'
    - run: ./.travis/linux/run-container.sh 6
    - uses: actions/upload-artifact@v2
      with: 
        name: Linux Clang6
        path: upload/
    
  linux_clang8:
    name: "Linux Clang8"
    runs-on: ubuntu-18.04
    steps:
    - uses: actions/checkout@v2
      with:
        submodules: 'recursive'
    - run: ./.travis/linux/run-container.sh 8
    - uses: actions/upload-artifact@v2
      with: 
        name: Linux Clang8
        path: upload/
    
  android:
    name: "Android"
    runs-on: ubuntu-18.04
    steps:
    - uses: actions/checkout@v2
      with:
        submodules: 'recursive'
    - run: ./.travis/android/run-container.sh
    - uses: actions/upload-artifact@v2
      with: 
        name: Android
        path: upload/
    
  macos:
    name: "macOS"
    runs-on: macOS-10.15
    steps:
    - uses: actions/checkout@v2
      with:
        submodules: 'recursive'
    - run: ./.travis/macos/install-dependencies.sh
    - run: ./.travis/macos/build.sh
    - uses: actions/upload-artifact@v2
      with: 
        name: macOS
        path: upload/
    
# TODO: Add Windows